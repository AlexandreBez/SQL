USE EMPRESA

INSERT INTO ENDERECO VALUES('CENTRO', 'SP', 1)
GO

CREATE TABLE TELEFONE(
    IDTELEFONE INT PRIMARY KEY IDENTITY,
    TIPO CHAR(3) NOT NULL,
    NUMERO VARCHAR(10) NOT NULL,
    ID_ALUNO INT,
    CHECK (TIPO IN('RES', 'COM', 'CEL'))
)
GO

INSERT INTO TELEFONE VALUES('CEL', '8362847368', 1)
GO

SELECT GETDATE()
GO

SELECT A.NOME, 
       ISNULL(T.TIPO, 'SEM') AS TIPO, 
       ISNULL(T.NUMERO, 'NUMERO') AS TELEFONE, 
       E.BAIRRO, 
       E.ESTADO 
FROM ALUNO A
LEFT JOIN TELEFONE T
ON A.IDALUNO = T.ID_ALUNO
INNER JOIN ENDERECO E
ON A.IDALUNO = E.ID_ALUNO
GO

